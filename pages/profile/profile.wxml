<!-- pages/profile/profile.wxml -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header" style="width:85vw;">
    <view class="user-avatar">
      <image class="avatar-img" src="http://120.48.81.209/teacher_kpi9g/images/avatar.png" mode="aspectFill"></image>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.userName || 'æœªç™»å½•'}}</text>
      <text class="user-department">{{userInfo.typeName ||userInfo.role.nickName || 'è¯·å…ˆç™»å½•'}}</text>
      <text class="user-score">å½“å‰ç»©æ•ˆåˆ†ï¼š{{userInfo.score || 0}}</text>
    </view>
    <view class="user-rank">
      <text class="rank-label">æ’å</text>
      <text class="rank-number">#{{userInfo.rank || '-'}}</text>
    </view>
  </view>

  <!-- æ•°æ®æ¦‚è§ˆ -->
  <view class="stats-overview" style="width:85vw;">
    <view class="stat-item">
      <text class="stat-value">{{userStats.totalEvaluations}}</text>
      <text class="stat-label">æ€»è€ƒæ ¸æ¬¡æ•°</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{userStats.averageScore}}</text>
      <text class="stat-label">å¹³å‡åˆ†</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{userStats.completionRate}}%</text>
      <text class="stat-label">å®Œæˆç‡</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section" style="width:90vw;">
    <view class="menu-group">
      <view class="menu-title">è€ƒæ ¸ç®¡ç†</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="navigateTo" data-url="/pages/evaluation/my">
          <view class="menu-icon">ğŸ“‹</view>
          <text class="menu-text">æˆ‘çš„è€ƒæ ¸è®°å½•</text>
          <view class="menu-badge" wx:if="{{unreadEvaluations > 0}}">{{unreadEvaluations}}</view>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>

    <view class="menu-group">
      <view class="menu-title">å…¶ä»–</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="onFeedback">
          <view class="menu-icon">ğŸ’¬</view>
          <text class="menu-text">æ„è§åé¦ˆ</text>
          <view class="menu-arrow">â€º</view>
        </view>
        <view class="menu-item" bindtap="onAbout">
          <view class="menu-icon">â„¹ï¸</view>
          <text class="menu-text">å…³äºæˆ‘ä»¬</text>
          <view class="menu-arrow">â€º</view>
        </view>
        <view class="menu-item" bindtap="onShare">
          <view class="menu-icon">ğŸ“¤</view>
          <text class="menu-text">åˆ†äº«åº”ç”¨</text>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section" wx:if="{{userInfo.userName}}" style="width:85vw;">
    <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- ç™»å½•æŒ‰é’® -->
  <view class="login-section" wx:if="{{!userInfo.userName}}" style="width:85vw;">
    <button class="login-btn" bindtap="onLogin">ç«‹å³ç™»å½•</button>
  </view>
</view>