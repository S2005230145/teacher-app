<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- åŠ¨æ€èƒŒæ™¯æ°”æ³¡ -->
  <view class="bubbles">
    <view class="bubble bubble-1"></view>
    <view class="bubble bubble-2"></view>
    <view class="bubble bubble-3"></view>
  </view>
  
  <!-- ä¸»è¦å†…å®¹å¡ç‰‡ -->
  <view class="glass-card">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <view class="header">
      <view class="logo-wrapper">
        <view class="logo">ğŸ‘¨â€ğŸ«</view>
        <view class="logo-glow"></view>
      </view>
      <text class="app-name">æ•™å¸ˆç»©æ•ˆè€ƒæ ¸</text>
      <text class="app-subtitle">Teacher Performance System</text>
    </view>
    <!-- ç™»å½•è¡¨å• -->
    <view class="form">
      <!-- å­¦æ ¡é€‰æ‹© -->
      <view class="input-group campus-selector {{campusFocus ? 'input-focused' : ''}}" bindtap="showCampusPicker">
        <view class="campus-text {{selectedCampus ? '' : 'campus-placeholder'}}">
          {{selectedCampus || 'é€‰æ‹©å­¦æ ¡'}}
        </view>
        <view class="arrow-icon">âŒ„</view>
        <view class="input-line"></view>
      </view>
      
      <!-- æ‰‹æœºå·è¾“å…¥ç»„ -->
      <view class="input-group">
      <!-- <view class="input-icon">ğŸ“±</view> -->
        <input 
          class="input" 
          type="number" 
          placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " 
          placeholder-class="placeholder"
          model:value="{{phone}}"
          bindfocus="onPhoneFocus"
          bindblur="onPhoneBlur"
          bindinput="onInputChange"
          maxlength="11"
        />
        <view class="input-line"></view>
      </view>

      <!-- å¯†ç è¾“å…¥ç»„ -->
      <view class="input-group">
      <!--  <view class="input-icon">ğŸ”’</view> -->
        <input 
          class="input" 
          password="{{!passwordVisible}}" 
          placeholder="è¯·è¾“å…¥å¯†ç " 
          placeholder-class="placeholder"
          model:value="{{password}}"
          bindfocus="onPasswordFocus"
          bindblur="onPasswordBlur"
          bindinput="onInputChange"
          bindconfirm="onLogin"
        />
        <view class="input-line"></view>
        <!-- æ˜¾ç¤º/éšè—å¯†ç  -->
        <view class="eye-icon" bindtap="togglePasswordVisibility">
          <text class="eye-text">{{passwordVisible ? 'éšè—' : 'æ˜¾ç¤º'}}</text>
        </view>
      </view>

      <!-- ç™»å½•æŒ‰é’® -->
      <button class="login-btn {{loading ? 'loading' : ''}}" bindtap="onLogin" disabled="{{loading}}">
        {{loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•'}}
      </button>

      <!-- é”™è¯¯æç¤º -->
      <view class="error-message" wx:if="{{errorMessage}}">
        <text class="error-text">âŒ {{errorMessage}}</text>
      </view>

      <!-- åº•éƒ¨é“¾æ¥ -->
      <view class="footer">
        <text class="footer-link" bindtap="onForgotPassword">å¿˜è®°å¯†ç ï¼Ÿ</text>
        <text class="footer-divider">|</text>
        <text class="footer-link" bindtap="onContactAdmin">è”ç³»ç®¡ç†å‘˜</text>
      </view>
    </view>
  </view>

  <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
  <view class="version">v1.0.0 Â· æ•™å¸ˆä¸“ä¸šå‘å±•å¹³å°</view>

  <!-- åº•éƒ¨å¼¹çª—ï¼šå­¦æ ¡é€‰æ‹© -->
  <view class="picker-overlay" wx:if="{{showCampusPicker}}" bindtap="hideCampusPicker">
    <view class="picker-modal" catchtap="stopPropagation">
      <view class="picker-header">
        <text class="picker-action" bindtap="hideCampusPicker">å–æ¶ˆ</text>
        <text class="picker-title">é€‰æ‹©å­¦æ ¡</text>
        <text class="picker-action confirm" bindtap="confirmCampusPicker">ç¡®å®š</text>
      </view>
      <picker-view class="picker-view" indicator-style="height: 60rpx" value="{{[campusIndex]}}" bindchange="onPickerViewChange">
        <picker-view-column>
          <view class="picker-item" wx:for="{{campusList}}" wx:key="id">
            {{item.campusName || item.name}}
          </view>
        </picker-view-column>
      </picker-view>
    </view>
  </view>

</view>